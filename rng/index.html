<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Random Number Generator (RNG) | Original Games Engine</title><meta name="description" content="Casino games built with a powerful custom game engine written in GO">
    <link rel="preload" href="/og-docs/assets/style-C1ek26lR.css" as="style"><link rel="stylesheet" href="/og-docs/assets/style-C1ek26lR.css">
    <link rel="modulepreload" href="/og-docs/assets/app-CyumRmGQ.js"><link rel="modulepreload" href="/og-docs/assets/index.html-0pjKxT1U.js">
    <link rel="prefetch" href="/og-docs/assets/index.html-CUImGlCA.js" as="script"><link rel="prefetch" href="/og-docs/assets/game-cms.html-Ce65Fctl.js" as="script"><link rel="prefetch" href="/og-docs/assets/introduction.html-icEi5lHL.js" as="script"><link rel="prefetch" href="/og-docs/assets/websocket-guide.html-DZm6lao3.js" as="script"><link rel="prefetch" href="/og-docs/assets/index.html-DCHRMS_l.js" as="script"><link rel="prefetch" href="/og-docs/assets/index.html-BPoX2JK1.js" as="script"><link rel="prefetch" href="/og-docs/assets/index.html-CGJf14YH.js" as="script"><link rel="prefetch" href="/og-docs/assets/baccarat.html-DAyjtw5_.js" as="script"><link rel="prefetch" href="/og-docs/assets/blackjack.html-Cd7TKMc_.js" as="script"><link rel="prefetch" href="/og-docs/assets/limbo.html-Dl8qEKaV.js" as="script"><link rel="prefetch" href="/og-docs/assets/get-configs.html-D8p51thV.js" as="script"><link rel="prefetch" href="/og-docs/assets/introduction.html-BZLnp040.js" as="script"><link rel="prefetch" href="/og-docs/assets/404.html-BA63WC_J.js" as="script"><link rel="prefetch" href="/og-docs/assets/setupDevtools-QXEOFQJV-DYzBxcrI.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/og-docs/"><!----><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Original Games Engine</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/og-docs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Introduction"><span class="title">Introduction</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Introduction"><span class="title">Introduction</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/og-docs/gameservice/" aria-label="Gameservice"><!--[--><!--[--><!--]--><!--]-->Gameservice<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/og-docs/get-started/" aria-label="Get Started"><!--[--><!--[--><!--]--><!--]-->Get Started<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="API Docs Menu"><span class="title">API Docs</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="API Docs Menu"><span class="title">API Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><a class="route-link auto-link" href="/og-docs/api-docs/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>HTTP Guide</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/http-guide/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/http-guide/get-configs.html" aria-label="Get game configs"><!--[--><!--[--><!--]--><!--]-->Get game configs<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><a class="route-link auto-link" href="/og-docs/api-docs/websocket-guide.html" aria-label="Websocket Guide"><!--[--><!--[--><!--]--><!--]-->Websocket Guide<!--[--><!--[--><!--]--><!--]--></a></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Game Integrations Guide</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/full-game-specific-guide/blackjack.html" aria-label="Blackjack"><!--[--><!--[--><!--]--><!--]-->Blackjack<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/full-game-specific-guide/limbo.html" aria-label="Limbo"><!--[--><!--[--><!--]--><!--]-->Limbo<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/full-game-specific-guide/baccarat.html" aria-label="Baccarat"><!--[--><!--[--><!--]--><!--]-->Baccarat<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/og-docs/rng/" aria-label="Random Number Generator"><!--[--><!--[--><!--]--><!--]-->Random Number Generator<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/bernardcosta/Tangiers" aria-label="Repository" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Repository<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/og-docs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Introduction"><span class="title">Introduction</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Introduction"><span class="title">Introduction</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/og-docs/gameservice/" aria-label="Gameservice"><!--[--><!--[--><!--]--><!--]-->Gameservice<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/og-docs/get-started/" aria-label="Get Started"><!--[--><!--[--><!--]--><!--]-->Get Started<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="API Docs Menu"><span class="title">API Docs</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="API Docs Menu"><span class="title">API Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><a class="route-link auto-link" href="/og-docs/api-docs/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>HTTP Guide</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/http-guide/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/http-guide/get-configs.html" aria-label="Get game configs"><!--[--><!--[--><!--]--><!--]-->Get game configs<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><a class="route-link auto-link" href="/og-docs/api-docs/websocket-guide.html" aria-label="Websocket Guide"><!--[--><!--[--><!--]--><!--]-->Websocket Guide<!--[--><!--[--><!--]--><!--]--></a></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Game Integrations Guide</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/full-game-specific-guide/blackjack.html" aria-label="Blackjack"><!--[--><!--[--><!--]--><!--]-->Blackjack<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/full-game-specific-guide/limbo.html" aria-label="Limbo"><!--[--><!--[--><!--]--><!--]-->Limbo<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/og-docs/api-docs/full-game-specific-guide/baccarat.html" aria-label="Baccarat"><!--[--><!--[--><!--]--><!--]-->Baccarat<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/og-docs/rng/" aria-label="Random Number Generator"><!--[--><!--[--><!--]--><!--]-->Random Number Generator<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/bernardcosta/Tangiers" aria-label="Repository" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Repository<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/og-docs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/og-docs/introduction/" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/gameservice/" aria-label="Gameservice"><!--[--><!--[--><!--]--><!--]-->Gameservice<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/og-docs/get-started/" aria-label="Get Started"><!--[--><!--[--><!--]--><!--]-->Get Started<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">API Docs <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/api-docs/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item">HTTP Guide <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/api-docs/http-guide/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/api-docs/http-guide/get-configs.html" aria-label="Get game configs"><!--[--><!--[--><!--]--><!--]-->Get game configs<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/api-docs/websocket-guide.html" aria-label="Websocket Guide"><!--[--><!--[--><!--]--><!--]-->Websocket Guide<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item">Game Integrations Guide <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/api-docs/full-game-specific-guide/blackjack.html" aria-label="Blackjack"><!--[--><!--[--><!--]--><!--]-->Blackjack<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/api-docs/full-game-specific-guide/limbo.html" aria-label="Limbo"><!--[--><!--[--><!--]--><!--]-->Limbo<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/og-docs/api-docs/full-game-specific-guide/baccarat.html" aria-label="Baccarat"><!--[--><!--[--><!--]--><!--]-->Baccarat<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/og-docs/rng/" aria-label="Random Number Generator"><!--[--><!--[--><!--]--><!--]-->Random Number Generator<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="random-number-generator-rng" tabindex="-1"><a class="header-anchor" href="#random-number-generator-rng"><span>Random Number Generator (RNG)</span></a></h1><p>The Random Number Generator (RNG) algorithm for the original-games engine is designed to generate a deterministic stream of bytes based on these given input parameters: <code>serverSeed</code>, <code>clientSeed</code>, <code>nonce</code>, and <code>cursor</code>. This algorithm leverages HMAC-SHA256 hashing to produce a pseudo-random sequence of bytes. These bytes could then be cast to floating point values. This is the basis of the number generator of any game built on top of this engine.</p><p>The RNG algorithm for the original-games engine is developed in Go (part of the <a class="route-link" href="/og-docs/gameservice/"><code>gameservice</code> app</a>) and it utilizes <code>crypto/hmac</code> &amp; <code>crypto/sha256</code> from Go&#39;s standard library in order to produce the randomly generated bytes. This algorithm is exclusively invoked every time a random event occurs in any game built with this engine.</p><p>As stated, the RNG algorithm requires these 4 input parameters:</p><ul><li><code>serverSeed</code>: A string acting as the key for the HMAC function.</li><li><code>clientSeed</code>: A user-defined string that, along with <code>nonce</code> and <code>currentRound</code>, forms the message to be hashed.</li><li><code>nonce</code>: An integer used to introduce uniqueness in the hash computation. Used to randomize different rounds for a given server seed and client seed for a particular player.</li><li><code>cursor</code>: An integer indicating the starting position in the 32 byte output from the HMAC function.</li></ul><p>The latter 3 values are merged into a single &#39;message&#39; and written into the HMAC function and the final hash (as byte stream) is computed. The algorithm streams 4 bytes at a time. 4 bytes being the amount required to build a 32-bit random floating point value. Therefore, each stream of 4 bytes is equivalent to a single random number.</p><p>The algorithm allows for an infinite byte stream starting from <code>cursor</code>, which is crucial for games which require many random events in a single round. If the full 32-byte output of the HMAC-SHA256 function are utilised within a single round, the HMAC function is invoked again and algorithm starts reading from cursor position again.</p><p>This approach is provably fair. Which means that given a server seed, client seed &amp; nonce, any game round can be reproducible. Since the client seed is completely controlled by the player &amp; can be changed anytime (except during a game), the casino does not have the ability to tamper with the RNG or the game outcome in general.</p><p>Below is the Random Number Generator function:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre><code><span class="line"><span class="token comment">// byteGenerator generates a `count` amount of bytes based </span></span>
<span class="line"><span class="token comment">// on the provided seeds and nonce starting at position `cursor`.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">byteGenerator</span><span class="token punctuation">(</span>serverSeed <span class="token builtin">string</span><span class="token punctuation">,</span> clientSeed <span class="token builtin">string</span><span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> cursor<span class="token punctuation">,</span> count <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">chan</span> <span class="token builtin">byte</span> <span class="token punctuation">{</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span></span>
<span class="line">		<span class="token comment">// to starts a completely new hash after the full 32 bytes are used </span></span>
<span class="line">		currentRound <span class="token operator">:=</span> cursor <span class="token operator">/</span> <span class="token number">32</span></span>
<span class="line">		<span class="token comment">// The position to start reading the HMAC digest from</span></span>
<span class="line">		currentRoundCursor <span class="token operator">:=</span> cursor <span class="token operator">%</span> <span class="token number">32</span></span>
<span class="line">		bytesGenerated <span class="token operator">:=</span> <span class="token number">0</span></span>
<span class="line">		<span class="token keyword">for</span> bytesGenerated <span class="token operator">&lt;</span> count <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// generate hash from input</span></span>
<span class="line">			<span class="token keyword">var</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>serverSeed<span class="token punctuation">)</span></span>
<span class="line">			hmac <span class="token operator">:=</span> hmac<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>sha256<span class="token punctuation">.</span>New<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line">            msg <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s:%s:%d&quot;</span><span class="token punctuation">,</span> clientSeed<span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>nonce<span class="token punctuation">)</span><span class="token punctuation">,</span> currentRound<span class="token punctuation">)</span></span>
<span class="line">			hmac<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">			buffer <span class="token operator">:=</span> hmac<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// send hash to channel, 1 byet at a tiem</span></span>
<span class="line">			<span class="token keyword">for</span> currentRoundCursor <span class="token operator">&lt;</span> <span class="token number">32</span> <span class="token punctuation">{</span></span>
<span class="line">				ch <span class="token operator">&lt;-</span> buffer<span class="token punctuation">[</span>currentRoundCursor<span class="token punctuation">]</span></span>
<span class="line">				currentRoundCursor<span class="token operator">++</span></span>
<span class="line">				bytesGenerated<span class="token operator">++</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// Hash depleted. Reset cursor and re generate hash from a new `currentRound`</span></span>
<span class="line">			currentRoundCursor <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">			currentRound<span class="token operator">++</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> ch</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>r RandomGenerator<span class="token punctuation">)</span> <span class="token function">GenerateFloats</span><span class="token punctuation">(</span>serverSeed<span class="token punctuation">,</span> clientSeed <span class="token builtin">string</span><span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> cursor<span class="token punctuation">,</span> count <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> count <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;count paramter should be greater than 0&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	rng <span class="token operator">:=</span> <span class="token function">byteGenerator</span><span class="token punctuation">(</span>serverSeed<span class="token punctuation">,</span> clientSeed<span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> cursor<span class="token punctuation">,</span> count <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span></span>
<span class="line">	byteSet <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> count<span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// aggregate to sets of 4 bytes for a single random float</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token function">len</span><span class="token punctuation">(</span>byteSet<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>count <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		b <span class="token operator">:=</span> <span class="token operator">&lt;-</span>rng</span>
<span class="line">		byteSet <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>byteSet<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	floats <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> floats <span class="token punctuation">{</span></span>
<span class="line">		chunk <span class="token operator">:=</span> byteSet<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">4</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">]</span></span>
<span class="line">		<span class="token keyword">var</span> value <span class="token builtin">uint32</span></span>
<span class="line">		<span class="token comment">// big endian so that the most significant bit is stored first, to produce large values from the &quot;similar&quot; chunks</span></span>
<span class="line">		err <span class="token operator">:=</span> binary<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">NewBuffer</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">,</span> binary<span class="token punctuation">.</span>BigEndian<span class="token punctuation">,</span> <span class="token operator">&amp;</span>value<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err</span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token comment">// divide by 2 ** 32 to get value between 0 and 1</span></span>
<span class="line">		floats<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">float64</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">32</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> floats<span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To generate a random numbers the call is simply this:</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre><code><span class="line">randFloat<span class="token punctuation">,</span> err <span class="token operator">:=</span> b<span class="token punctuation">.</span>RNG<span class="token punctuation">.</span><span class="token function">GenerateFloats</span><span class="token punctuation">(</span><span class="token string">&quot;server seed&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;client seed&quot;</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>To show that the output is a uniformly distributed set of floats between 0 and 1. Running the above command in a loop incrementing the nonce each time produced the below distribution:</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/bernardcosta/Tangiers/edit/main/rng/README.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Edit this page<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: mail2048@pm.me">cybeni</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/og-docs/assets/app-CyumRmGQ.js" defer></script>
  </body>
</html>
